<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFlow - Gestão de Projetos</title>
    
    <!-- Fonts & CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <style>
        :root {
            --bg-color: #f4f5f7;
            --text-color: #172b4d;
            --board-bg: #ebecf0;
            --card-bg: #ffffff;
            --sidebar-width: 260px;
            --primary-color: #0052cc;
        }

        body { font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-color); overflow-x: hidden; }
        
        /* Sidebar */
        .sidebar { width: var(--sidebar-width); height: 100vh; position: fixed; top: 0; left: 0; background: #fff; border-right: 1px solid #dfe1e6; z-index: 1000; display: flex; flex-direction: column; }
        .sidebar-header { height: 60px; display: flex; align-items: center; padding: 0 24px; border-bottom: 1px solid #dfe1e6; }
        .logo { font-weight: 700; font-size: 1.25rem; color: var(--primary-color); display: flex; align-items: center; gap: 10px; }
        .nav-links { padding: 20px 16px; flex: 1; }
        .nav-item { display: flex; align-items: center; padding: 10px 12px; color: #42526e; text-decoration: none; border-radius: 3px; margin-bottom: 4px; font-weight: 500; }
        .nav-item:hover, .nav-item.active { background-color: #ebecf0; color: var(--primary-color); }
        .nav-item i { margin-right: 12px; }

        /* Main Content */
        .main-wrapper { margin-left: var(--sidebar-width); height: 100vh; display: flex; flex-direction: column; }
        .top-header { height: 60px; background: #fff; border-bottom: 1px solid #dfe1e6; display: flex; align-items: center; justify-content: space-between; padding: 0 24px; }
        
        /* Kanban Board */
        .board-container { flex: 1; overflow-x: auto; padding: 24px; display: flex; align-items: flex-start; gap: 24px; }
        .board-column { background-color: var(--board-bg); border-radius: 3px; width: 300px; min-width: 300px; max-height: 100%; display: flex; flex-direction: column; }
        .column-header { padding: 10px 16px; font-weight: 600; font-size: 0.9rem; color: #5e6c84; display: flex; justify-content: space-between; align-items: center; }
        .column-content { padding: 0 8px 8px; overflow-y: auto; flex: 1; min-height: 50px; }
        
        .task-card { background-color: var(--card-bg); border-radius: 3px; padding: 10px; margin-bottom: 8px; box-shadow: 0 1px 2px rgba(9,30,66,0.25); cursor: grab; transition: 0.2s; position: relative; }
        .task-card:hover { background-color: #f4f5f7; }
        .task-tags { display: flex; gap: 4px; margin-bottom: 6px; }
        .task-tag { font-size: 0.7rem; padding: 2px 6px; border-radius: 3px; font-weight: 600; }
        .tag-design { background-color: #e3fcef; color: #006644; }
        .tag-dev { background-color: #deebff; color: #0747a6; }
        .tag-urgent { background-color: #ffebe6; color: #bf2600; }
        
        .task-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 8px; font-size: 0.8rem; color: #6b778c; }
        .task-members img { width: 24px; height: 24px; border-radius: 50%; border: 2px solid #fff; margin-left: -8px; }
        .task-members img:first-child { margin-left: 0; }

        .add-card-btn { padding: 8px; color: #5e6c84; cursor: pointer; border-radius: 3px; margin: 0 8px 8px; display: flex; align-items: center; gap: 6px; }
        .add-card-btn:hover { background-color: rgba(9,30,66,0.08); color: #172b4d; }

        .delete-task-btn { position: absolute; top: 5px; right: 5px; color: #6b778c; cursor: pointer; opacity: 0; transition: 0.2s; font-size: 0.8rem; }
        .task-card:hover .delete-task-btn { opacity: 1; }
        .delete-task-btn:hover { color: #dc3545; }

        .demo-banner { background: #36b37e; color: #fff; text-align: center; padding: 5px; font-size: 0.9rem; position: fixed; bottom: 0; width: 100%; z-index: 2000; }

        @media (max-width: 768px) {
            .sidebar { display: none; }
            .main-wrapper { margin-left: 0; }
        }
    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo"><i class="bi bi-kanban"></i> TaskFlow</div>
        </div>
        <div class="nav-links">
            <a href="#" class="nav-item active"><i class="bi bi-columns-gap"></i> Quadro</a>
            <a href="#" class="nav-item"><i class="bi bi-list-task"></i> Lista</a>
            <a href="#" class="nav-item"><i class="bi bi-calendar3"></i> Calendário</a>
            <hr>
            <a href="#" class="nav-item"><i class="bi bi-people"></i> Equipe</a>
            <a href="#" class="nav-item"><i class="bi bi-gear"></i> Configurações</a>
            <a href="../index.html" class="nav-item text-danger"><i class="bi bi-box-arrow-left"></i> Sair</a>
        </div>
    </aside>

    <div class="main-wrapper">
        <header class="top-header">
            <h5 class="mb-0 fw-bold">Projeto: Lançamento App v2.0</h5>
            <div class="d-flex align-items-center gap-3">
                <div class="d-flex align-items-center">
                    <img src="https://ui-avatars.com/api/?name=Admin&background=0052cc&color=fff" class="rounded-circle" width="32">
                </div>
                <button class="btn btn-primary btn-sm" onclick="alert('Funcionalidade Demo')">Convidar</button>
            </div>
        </header>

        <div class="board-container">
            <!-- Column: To Do -->
            <div class="board-column">
                <div class="column-header">
                    <span>A FAZER</span>
                    <i class="bi bi-three-dots"></i>
                </div>
                <div class="column-content" id="col-todo" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <!-- Cards will be injected here -->
                </div>
                <div class="add-card-btn" onclick="addNewCard('col-todo')">
                    <i class="bi bi-plus"></i> Adicionar cartão
                </div>
            </div>

            <!-- Column: In Progress -->
            <div class="board-column">
                <div class="column-header">
                    <span>EM PROGRESSO</span>
                    <i class="bi bi-three-dots"></i>
                </div>
                <div class="column-content" id="col-progress" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <!-- Cards will be injected here -->
                </div>
                <div class="add-card-btn" onclick="addNewCard('col-progress')">
                    <i class="bi bi-plus"></i> Adicionar cartão
                </div>
            </div>

            <!-- Column: Done -->
            <div class="board-column">
                <div class="column-header">
                    <span>CONCLUÍDO</span>
                    <i class="bi bi-three-dots"></i>
                </div>
                <div class="column-content" id="col-done" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <!-- Cards will be injected here -->
                </div>
                <div class="add-card-btn" onclick="addNewCard('col-done')">
                    <i class="bi bi-plus"></i> Adicionar cartão
                </div>
            </div>
        </div>
    </div>

    <div class="demo-banner">
        ⚠️ Modelo Gestão de Projetos - <strong>Inove Dev</strong>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initial Data
        const defaultTasks = [
            { id: 't1', title: 'Criar wireframes da Home', col: 'col-todo', tag: 'Design', tagClass: 'tag-design' },
            { id: 't2', title: 'Configurar banco de dados', col: 'col-progress', tag: 'Dev', tagClass: 'tag-dev' },
            { id: 't3', title: 'Reunião de Kickoff', col: 'col-done', tag: 'Geral', tagClass: 'tag-urgent' },
            { id: 't4', title: 'Corrigir bug no login', col: 'col-todo', tag: 'Bug', tagClass: 'tag-urgent' }
        ];

        // Load Tasks
        function loadTasks() {
            const tasks = JSON.parse(localStorage.getItem('kanban_tasks')) || defaultTasks;
            
            // Clear columns
            ['col-todo', 'col-progress', 'col-done'].forEach(id => {
                document.getElementById(id).innerHTML = '';
            });

            tasks.forEach(task => {
                createCardElement(task);
            });
        }

        function createCardElement(task) {
            const card = document.createElement('div');
            card.className = 'task-card';
            card.draggable = true;
            card.id = task.id;
            card.ondragstart = drag;
            
            card.innerHTML = `
                <i class="bi bi-x-lg delete-task-btn" onclick="deleteTask('${task.id}')" title="Excluir"></i>
                <div class="task-tags">
                    <span class="task-tag ${task.tagClass}">${task.tag}</span>
                </div>
                <div class="task-title">${task.title}</div>
                <div class="task-footer">
                    <div class="task-id">#${task.id.toUpperCase()}</div>
                    <div class="task-members">
                        <img src="https://ui-avatars.com/api/?name=User&background=random" title="Responsável">
                    </div>
                </div>
            `;
            
            document.getElementById(task.col).appendChild(card);
        }

        // Drag and Drop Functions
        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function drop(ev) {
            ev.preventDefault();
            var data = ev.dataTransfer.getData("text");
            var card = document.getElementById(data);
            
            // Find the closest column content
            let target = ev.target;
            while (!target.classList.contains('column-content')) {
                target = target.parentElement;
                if(!target) return; // Safety check
            }
            
            target.appendChild(card);
            saveState();
        }

        // Add New Card
        function addNewCard(columnId) {
            const title = prompt("Título da nova tarefa:");
            if (title) {
                const newTask = {
                    id: 't' + Date.now(),
                    title: title,
                    col: columnId,
                    tag: 'Geral',
                    tagClass: 'tag-dev'
                };
                
                createCardElement(newTask);
                saveState();
            }
        }

        // Delete Task
        function deleteTask(id) {
            if(confirm('Excluir esta tarefa?')) {
                const card = document.getElementById(id);
                card.remove();
                saveState();
            }
        }

        // Save to LocalStorage
        function saveState() {
            const tasks = [];
            ['col-todo', 'col-progress', 'col-done'].forEach(colId => {
                const col = document.getElementById(colId);
                const cards = col.getElementsByClassName('task-card');
                
                for (let card of cards) {
                    const tagSpan = card.querySelector('.task-tag');
                    tasks.push({
                        id: card.id,
                        title: card.querySelector('.task-title').innerText,
                        col: colId,
                        tag: tagSpan.innerText,
                        tagClass: tagSpan.classList[1]
                    });
                }
            });
            
            localStorage.setItem('kanban_tasks', JSON.stringify(tasks));
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', loadTasks);
    </script>
</body>
</html>